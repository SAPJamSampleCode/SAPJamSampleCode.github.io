/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2014 SAP SE or an SAP affiliate company. 
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
jQuery.sap.declare("sap.ui.demokit.UI5EntityCueCard");jQuery.sap.require("sap.ui.demokit.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ui.demokit.UI5EntityCueCard",{metadata:{library:"sap.ui.demokit",properties:{"collapsible":{type:"boolean",group:"Misc",defaultValue:true},"expanded":{type:"boolean",group:"Misc",defaultValue:false},"navigable":{type:"boolean",group:"Misc",defaultValue:false},"entityName":{type:"string",group:"Misc",defaultValue:null},"style":{type:"sap.ui.demokit.UI5EntityCueCardStyle",group:"Misc",defaultValue:null}},events:{"navigate":{allowPreventDefault:true}}}});sap.ui.demokit.UI5EntityCueCard.M_EVENTS={'navigate':'navigate'};jQuery.sap.require("sap.ui.commons.Link");jQuery.sap.require("sap.ui.demokit.EntityInfo");
sap.ui.demokit.UI5EntityCueCard.prototype.init=function(){this._oShowCueCardLink=new sap.ui.commons.Link({text:"Show All Settings",press:[this._toggleExpanded,this]});this._oShowCueCardLink.setParent(this);this._aHistory=[];this._iHistory=-1};
sap.ui.demokit.UI5EntityCueCard.prototype.setEntityName=function(e){if(e!==this.getEntityName()){this.setProperty("entityName",e);this._aHistory[++this._iHistory]=e;this._aHistory.length=this._iHistory+1}};
sap.ui.demokit.UI5EntityCueCard.prototype.back=function(){if(this._iHistory>0){this.setProperty("entityName",this._aHistory[--this._iHistory])}};
sap.ui.demokit.UI5EntityCueCard.prototype.forward=function(){if(this._iHistory+1<this._aHistory.length){this.setProperty("entityName",this._aHistory[++this._iHistory])}};
sap.ui.demokit.UI5EntityCueCard.prototype.setExpanded=function(e){this.setProperty("expanded",e);this._oShowCueCardLink&&this._oShowCueCardLink.setText(this.getExpanded()?"Hide Settings":"Show All Settings")};
sap.ui.demokit.UI5EntityCueCard.prototype.onclick=function(e){if(this.getNavigable()){var E=jQuery(e.target).attr("data-sap-ui-entity");if(E&&this.fireNavigate({entityName:E})){this.setEntityName(E)}}};
sap.ui.demokit.UI5EntityCueCard.prototype._toggleExpanded=function(){this.setExpanded(!this.getExpanded())};
sap.ui.demokit.UI5EntityCueCard.prototype._getDoc=function(){var n=this.getEntityName();return sap.ui.demokit.EntityInfo.getEntityDocu(n)};
sap.ui.demokit.UI5EntityCueCard.createDialog=function(){jQuery.sap.require("sap.ui.commons.Button");jQuery.sap.require("sap.ui.commons.Dialog");jQuery.sap.require("sap.ui.commons.Toolbar");var c=new sap.ui.demokit.UI5EntityCueCard({collapsible:false,expanded:true,navigable:true});var d=new sap.ui.commons.Dialog({title:"Cue Card",minWidth:"200px",minHeight:"200px",maxWidth:"75%",maxHeight:"75%",content:[new sap.ui.commons.Toolbar({standalone:false,items:[new sap.ui.commons.Button({text:"Back",press:function(){c.back()}}),new sap.ui.commons.Button({text:"Fwd",press:function(){c.forward()}})]}),c]});d.openForClass=function(C){c.setEntityName(C);this.rerender();this.open()};return d};
sap.ui.demokit.UI5EntityCueCard.attachToContextMenu=function(n){var d;jQuery(n||window.document).bind("contextmenu.sapDkCueCd",function(e){if(e.shiftKey&&e.ctrlKey){var c=jQuery(e.target).control(0);if(c&&(!d||!d.getDomRef()||(d.getDomRef()!==e.target&&!jQuery.contains(d.getDomRef(),e.target)))){d=d||sap.ui.demokit.UI5EntityCueCard.createDialog();d.openForClass(c.getMetadata().getName());e.preventDefault();e.stopPropagation()}}})};
sap.ui.demokit.UI5EntityCueCard.detachFromContextMenu=function(n){jQuery(n||window.document).unbind("contextmenu.sapDkCueCd")};
