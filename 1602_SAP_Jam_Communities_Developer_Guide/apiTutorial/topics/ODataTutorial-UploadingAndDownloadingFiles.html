<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Uploading and downloading files"/>
<meta name="abstract" content="The SAP Jam OData API calls that relate to files (BLOBs) include the ContentItem, Image, ThumbnailImage, and FeedEntryImage calls. For any POST, GET, or PATCH call, you can affect only the information about the file, or you can create, retrieve, or update the actual file. This page describes how the API calls must be set to create, retrieve, or update the files."/>
<meta name="description" content="The SAP Jam OData API calls that relate to files (BLOBs) include the ContentItem, Image, ThumbnailImage, and FeedEntryImage calls. For any POST, GET, or PATCH call, you can affect only the information about the file, or you can create, retrieve, or update the actual file. This page describes how the API calls must be set to create, retrieve, or update the files."/>
<meta name="DC.Relation" scheme="URI" content="../../apiTutorial/topics/ODataTutorial.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="ODataTutorial-UploadingAndDownloadingFiles"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="../../commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../SAP_Jam_Communities_Developer_Guide.css"/>
<title>Uploading and downloading files</title>
<script type="text/javascript" src="../../run_prettify.js"> </script></head>
<body id="ODataTutorial-UploadingAndDownloadingFiles">


    <h1 class="title topictitle1">Uploading and downloading files</h1>

    
    <div class="body conbody"><div class="abstract"><span class="shortdesc">The SAP Jam OData API calls that relate to files (BLOBs) include the
                <samp class="ph codeph">ContentItem</samp>, <samp class="ph codeph">Image</samp>, <samp class="ph codeph">ThumbnailImage</samp>, and
                <samp class="ph codeph">FeedEntryImage</samp> calls. For any POST, GET, or PATCH call, you can affect only
            the information about the file, or you can create, retrieve, or update the actual file. This page
            describes how the API calls must be set to create, retrieve, or update the
        files.</span>
</div>

        <p class="p">For the POST, GET, and PATCH calls, you must set all of the following to have the call manage the
            file (<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__blob">BLOB</a>):</p>

        <ol class="ol">
            <li class="li">The <strong class="ph b"><samp class="ph codeph">Content-Type</samp></strong> HTTP header must be set to the proper type for the file
                involved.</li>

            <li class="li">The <strong class="ph b"><samp class="ph codeph">Slug</samp></strong> HTTP header must be set. This allows you to specify the name of the
                file involved.</li>

            <li class="li">The <strong class="ph b"><samp class="ph codeph">$value</samp></strong> URL parameter must be set it indicate that the "raw value" of the
                resource (the actual file being referred to) should be acted upon, rather than just the
                information about the resource.</li>

        </ol>

        <div class="section"><h2 class="title sectiontitle">Set the required HTTP headers</h2>
            <p class="p">Please refer to the <cite class="cite">Authorization API</cite>
                section for more information.</p>

            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table apitable" frame="border" border="1" rules="all">
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="16.666666666666664%" id="d4995e83">Header Field</th>

                            <th class="entry" valign="top" width="16.666666666666664%" id="d4995e86">Use</th>

                            <th class="entry" valign="top" width="66.66666666666666%" id="d4995e89">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr id="ODataTutorial-UploadingAndDownloadingFiles__slug" class="row">
                            <td class="entry" valign="top" width="16.666666666666664%"><strong class="ph b">Slug:</strong></td>

                            <td class="entry mandatory" valign="top" width="16.666666666666664%" headers="d4995e83 d4995e86 ">Mandatory for file uploads or downloads</td>

                            <td class="entry" valign="top" width="66.66666666666666%" headers="d4995e89 ">"Slug" is an HTTP header whose presence in a POST to a Collection
                                constitutes a request by the client to use the header's value as part of any
                                URIs that would normally be used to retrieve the to-be-created Entry or Media
                                Resources. Effectively, this is the string that you want to appear, or as it
                                does appear, as the name of the file in SAP Jam. To upload that should appear
                                in SAP as "<samp class="ph codeph">profilePhoto.png</samp>", or to download a file that SAP
                                Jam shows as "<samp class="ph codeph">profilePhoto.png</samp>", you would need to set
                                    <samp class="ph codeph">Slug: profilePhoto.png</samp>.</td>

                        </tr>

                        <tr id="ODataTutorial-UploadingAndDownloadingFiles__contenttype" class="row">
                            <td class="entry" valign="top" width="16.666666666666664%"><strong class="ph b">Content-Type:</strong></td>

                            <td class="entry mandatory" valign="top" width="16.666666666666664%" headers="d4995e83 d4995e86 ">Mandatory for file uploads or downloads</td>

                            <td class="entry" valign="top" width="66.66666666666666%" headers="d4995e89 ">Must be a MIME type that matches the file type of the resource identified
                                in "Slug". Valid options include: <ul class="ul">
                                    <li class="li"><samp class="ph codeph">text/html;type=wiki</samp></li>

                                    <li class="li"><samp class="ph codeph">text/html;type=blog</samp></li>

                                    <li class="li"><samp class="ph codeph">text/html</samp></li>

                                    <li class="li"><samp class="ph codeph">image/png</samp></li>

                                    <li class="li"><samp class="ph codeph">image/jpg</samp></li>

                                    <li class="li"><samp class="ph codeph">video/mp4</samp></li>

                                    <li class="li"><samp class="ph codeph">application/vnd.ms-powerpoint</samp></li>

                                    <li class="li"><samp class="ph codeph">application/vnd.openxml-formats-officedocument.presentationalml.presentation</samp></li>

                                </ul>

                                <p class="p">For a complete list of possible MIME types, please see <a class="xref" href="http://www.iana.org/assignments/media-types/media-types.xhtml" target="_blank">http://www.iana.org/assignments/media-types/media-types.xhtml</a>.
                                    Note that SAP Jam has tested a sub-set of this list, covering the most
                                    commonly used formats; however, we make no guarantee of complete
                                    support.</p>

                                <p class="p lines">Example: <samp class="ph codeph">ContentType:
                                image/png</samp></p>
</td>

                        </tr>

                    </tbody>

                </table>
</div>

            <p class="p">The Authorization header is also required, as for all SAP OData API calls.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Include the <samp class="ph codeph">$value</samp> URL parameter</h2>
            
            <p class="p">This ensures that the "raw resource" (the file being referred to) is uploaded or downloaded,
                rather than the metadata about the resource.</p>

            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table apitable" frame="border" border="1" rules="all">
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="16.666666666666664%" id="d4995e210">URL Segment</th>

                            <th class="entry" valign="top" width="16.666666666666664%" id="d4995e213">Required</th>

                            <th class="entry" valign="top" width="66.66666666666666%" id="d4995e216">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="16.666666666666664%" headers="d4995e210 ">
                                <strong class="ph b">$value</strong>
                            </td>

                            <td class="entry mandatory" valign="top" width="16.666666666666664%" headers="d4995e213 ">Mandatory for file uploads or downloads</td>

                            <td class="entry" valign="top" width="66.66666666666666%" headers="d4995e216 ">Indicates that the request should act upon the "raw value" of the resource:
                                the actual content item.</td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

        <div class="section"><h2 class="title sectiontitle">Example CURL Commands</h2>
            
            <p class="p"><strong class="ph b">XML: Updating a file</strong></p>

            <pre class="pre codeblock prettyprint lang-sh">curl -i -H 'Authorization: Bearer &lt;!--[An OAuth2.0 auth_token has been removed from here.]--&gt;'
     -H 'Accept: application/xml' -H 'Content-Type: text/plain'
     -H 'Slug: a new file' -d "@/location_to_file"
     --X POST "https://<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__jamnumber">&lt;jam#&gt;</a>.sapjam.com/api/v1/OData/Groups('BVLOW25SoRV8ZA6XiUxIAA')/ContentItems/$value"</pre>

            <p class="p"><strong class="ph b">JSON: Updating a file</strong></p>

            <pre class="pre codeblock prettyprint lang-sh">curl -i -H 'Authorization: OAuth &lt;!--[The OAuth1.0a protocol parameters have been removed from here.]--&gt;'
     -H 'Accept: application/json' -H 'Content-Type: text/plain'
     -H 'Slug: a new file' -d "@/location_to_file"
     --X POST "https://<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__jamnumber">&lt;jam#&gt;</a>.sapjam.com/api/v1/OData/Groups('BVLOW25SoRV8ZA6XiUxIAA')/ContentItems/$value"</pre>

            <p class="p"><strong class="ph b">XML: Creating a wiki with an attached file</strong></p>

            <p class="p">Note that you could input HTML rather than specifying a file location, as long as it is <a class="xref" href="ODataTutorial-SupportedHtmlForInputs.html" title="This page lists the HTML tags that are supported in various SAP Jam OData API inputs such as inputs for wikis, blogs, Questions, Ideas, and Discussions.">compatible
                    HTML</a>.</p>

            <pre class="pre codeblock prettyprint lang-sh">curl -i -H 'Authorization: Bearer &lt;!--[An OAuth2.0 auth_token has been removed from here.]--&gt;'
     -H 'Accept: application/xml' -H 'Content-Type: text/html;type=wiki'
     -H 'Slug: a new wiki' -d "@/location_to_html"
     --X POST "https://<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__jamnumber">&lt;jam#&gt;</a>.sapjam.com/api/v1/OData/Groups('BVLOW25SoRV8ZA6XiUxIAA')/ContentItems/$value"</pre>

            <p class="p"><strong class="ph b">JSON: Creating a wiki with an attached file</strong></p>

            <p class="p">Note that you could input HTML rather than specifying a file location, as long as it is <a class="xref" href="ODataTutorial-SupportedHtmlForInputs.html" title="This page lists the HTML tags that are supported in various SAP Jam OData API inputs such as inputs for wikis, blogs, Questions, Ideas, and Discussions.">compatible
                    HTML</a>.</p>

            <pre class="pre codeblock prettyprint lang-sh">curl -i -H 'Authorization: OAuth &lt;!--[The OAuth1.0a protocol parameters have been removed from here.]--&gt;'
     -H 'Accept: application/json' -H 'Content-Type: text/html;type=wiki'
     -H 'Slug: a new wiki' -d "@/location_to_html"
     --X POST "https://<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__jamnumber">&lt;jam#&gt;</a>.sapjam.com/api/v1/OData/Groups('BVLOW25SoRV8ZA6XiUxIAA')/ContentItems/$value"</pre>

            <p class="p"><strong class="ph b">XML: Creating a blog with HTML text as a payload</strong></p>

            <pre class="pre codeblock prettyprint lang-sh">curl -i -H 'Authorization: Bearer &lt;!--[An OAuth2.0 auth_token has been removed from here.]--&gt;'
     -H 'Accept: application/xml' -H 'Content-Type: text/html;type=blog'
     -H 'Slug: a new blog' -d "&lt;p&gt;some blog&lt;/p&gt;"
     --X POST "https://<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__jamnumber">&lt;jam#&gt;</a>.sapjam.com/api/v1/OData/Groups('BVLOW25SoRV8ZA6XiUxIAA')/ContentItems/$value"</pre>

            <p class="p"><strong class="ph b">JSON: Creating a blog with HTML text as a payload</strong></p>

            <pre class="pre codeblock prettyprint lang-sh">curl -i -H 'Authorization: OAuth &lt;!--[The OAuth1.0a protocol parameters have been removed from here.]--&gt;'
     -H 'Accept: application/json' -H 'Content-Type: text/html;type=blog'
     -H 'Slug: a new blog' -d "&lt;p&gt;some blog&lt;/p&gt;"
     --X POST "https://<a class="xref" href="ODataOverviewAndGlossary.html#ODataOverviewAndGlossary__jamnumber">&lt;jam#&gt;</a>.sapjam.com/api/v1/OData/Groups('BVLOW25SoRV8ZA6XiUxIAA')/ContentItems/$value"</pre>

        </div>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../apiTutorial/topics/ODataTutorial.html" title="This tutorial is designed to help developers familiar with REST to quickly get up to speed using the SAP Jam Communities OData API, and give them a good understanding of SAP Jam Communities's OData implementation.">SAP Jam Communities OData Tutorial</a></div>
</div>
</div>

</body>
</html>